<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="
	width=device-width,
	initial-scale=1"
	<title>
	<style type ="text/css">
		canvas{
			background-color: rgb(150,200,250);
		}
	</style>
	</title>
</head
<body>
	<canvas id="mycanvas" width="500" height="500">
		Tu navegador no soporta canvas
	</canvas>

	<script type ="text/javascript">
        //style="display: none"


	var cv = null;
	var ctx = null;
	var player1 = null;
    var player2 = null;
	var super_x = 240, super_y = 240;
    var direction = 'right';
    var score = 0;
    var speed = 10;
    var pause = false;

    function getRandomInt(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1)) + min;
    }


	function start(){
		cv = document.getElementById('mycanvas');
		ctx = cv.getContext('2d')

		player1 = new Cuadrado(super_x,super_y,40,40,"red");		

        player2 = new Cuadrado(getRandomInt(10,480),getRandomInt(10,480),40,40,"blue");
		paint();
	}


	var move = false;


	//eventos de teclado
	document.addEventListener('keydown',function(e){
		//arriba
		if (e.keyCode == 87 || e.keyCode==38){
			direction = 'up';
		}

		//abajo
		if (e.keyCode == 83 || e.keyCode==40){
			direction = 'down';
		}

		//izquierda
		if (e.keyCode == 65 || e.keyCode==37){
			direction = 'left';
		}

		//derecha
		if (e.keyCode == 68 || e.keyCode==39){
			direction = 'right';
		}

        //pause
        if (e.keyCode == 32){
            pause = (pause)?false:true;
        }
	});

	function Cuadrado(x,y,w,h,c){
		this.x = x;
		this.y = y;
		this.w = w;
		this.h = h;
		this.c = c;

		this.dibujar = function(ctx){
			ctx.fillStyle = this.c;
			ctx.strokeRect(this.x,this.y,this.w,this.h);
			ctx.fillRect(this.x,this.y,this.w,this.h);
		}

        this.se_tocan = function (target) { 
        if(this.x < target.x + target.w &&
        this.x + this.w > target.x && 
        this.y < target.y + target.h && 
        this.y + this.h > target.y){
            return true;  
        }  

    };
	}

	function paint(){
		window.requestAnimationFrame(paint)

		ctx.fillStyle = "rgb(150,200,250)";
		ctx.fillRect(0,0,500,500);	

        ctx.fillStyle = "black";
        ctx.fillText("SCORE: "+score,50,50);

		player1.dibujar(ctx);

        player2.dibujar(ctx);

        if (!pause){
            update();
        }else{
            ctx.fillStyle = "rgba(0,0,0,0.5)"
            ctx.fillRect(0,0,500,500);

            ctx.fillStyle = "white";
            ctx.fillText("P A U S E",230,230);
           
        }

		
	}

    

	function update(){
        if (direction == 'right'){
            player1.x += speed;
		    if (player1.x > 500){
			    player1.x = 0;
		    }
        }

        if (direction == 'left'){
            player1.x -= speed;
		    if (player1.x < 0){
			    player1.x = 500;
		    }
        }

        if (direction == 'up'){
            player1.y -= speed;
		    if (player1.y < 0){
			    player1.y = 500;
		    }
        }

        if (direction == 'down'){
            player1.y += speed;
		    if (player1.y > 500){
			    player1.y = 0;
		    }
        }
        
        if (player1.se_tocan(player2)){
            player2.x = getRandomInt(10,480);
            player2.y = getRandomInt(10,480); 
            score += 5;
            speed += 2;
        }
	}

	window.addEventListener('load',start);

	window.requestAnimationFrame = (function () {
   		return window.requestAnimationFrame ||
        		window.webkitRequestAnimationFrame ||
        		window.mozRequestAnimationFrame ||
        		function (callback) {
            			window.setTimeout(callback, 17);
        	};
	}());


   </script>
</body>
</html>
